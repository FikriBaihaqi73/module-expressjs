# Pekan 4 - Hari 19: Environment & Logger

**HARI KE-19** ‚Äì Konfigurasi & Monitoring
**Fokus hari ini:** Mengelola konfigurasi aplikasi dengan aman dan memantau aktivitas server.

---

## 1. Environment Variables (.env)

Kita sudah pakai `.env`, tapi mari pahami aturannya:
1.  **JANGAN COMMIT .env ke Git!** (Masukkan ke `.gitignore`).
2.  **Buat `.env.example`**: Berisi template variabel tanpa nilai rahasia.

Contoh `.env.example`:
```env
PORT=3000
DATABASE_URL="postgresql://user:pass@localhost:5432/db_name"
JWT_SECRET="isi_secret_di_sini"
```

---

## 2. Logger (Morgan)

Kita butuh tahu siapa yang akses server kita, kapan, dan statusnya apa. `console.log` biasa tidak cukup.

### Install Morgan
```bash
npm install morgan @types/morgan
```

### Setup di `src/index.ts`
```ts
import morgan from 'morgan';

// Gunakan format 'dev' untuk development (warna-warni)
// Gunakan 'combined' untuk production (lebih detail, standar Apache)
app.use(morgan('dev'));
```

Sekarang setiap request akan muncul di terminal:
`GET /api/products 200 15.234 ms - 50`

---

## 3. Sanitasi Input (Keamanan)

Mencegah XSS (Cross Site Scripting) atau Injection ringan. Walaupun Prisma sudah aman dari SQL Injection, kita tetap perlu hati-hati.

Gunakan library seperti `helmet` untuk keamanan header HTTP.

```bash
npm install helmet
```

```ts
import helmet from 'helmet';

app.use(helmet()); // Otomatis set header keamanan HTTP
```

---

## 4. Tugas Harian Hari Ke-19

**Misi:** Rapikan konfigurasi dan tambahkan monitoring.

1.  **Gitignore:** Pastikan `.env` dan folder `node_modules` masuk `.gitignore`.
2.  **Env Example:** Buat file `.env.example`.
3.  **Logger:** Pasang `morgan`. Coba hit endpoint dan lihat log-nya.
4.  **Helmet:** Pasang `helmet`.
5.  **Cors:** (Tambahan) Install `cors` agar API bisa diakses dari Frontend beda domain.
    ```bash
    npm install cors @types/cors
    ```
    ```ts
    import cors from 'cors';
    app.use(cors());
    ```

**Checklist:**
- [ ] `.env` tidak ter-upload ke Git.
- [ ] Log request muncul di terminal.
- [ ] Header response lebih aman (cek di Postman Headers, ada `X-DNS-Prefetch-Control` dll dari Helmet).

---

**Tips:** Log adalah "kotak hitam" pesawat. Kalau server crash, log adalah hal pertama yang kita cari. üìù
