# Pekan 2 - Hari 12: Evaluasi Pekanan

**HARI KE-12** â€“ Review & Refleksi
**Fokus hari ini:** Mengukur pemahaman materi PostgreSQL dan Prisma ORM dalam konteks E-Commerce.

---

## 1. Review Materi Pekan Ini

Dalam satu pekan ini, kamu sudah belajar lompatan besar:
- **Hari 7:** Setup Database PostgreSQL & SQL Dasar.
- **Hari 8:** Relasi Tabel & SQL Lanjutan (Join).
- **Hari 9:** Migrasi ke Prisma ORM & CRUD.
- **Hari 10:** Validasi Input & Relasi di Prisma.
- **Hari 11:** Error Handling & Soft Delete.

Dari sekadar array di memori (Pekan 1), sekarang aplikasimu punya penyimpanan permanen yang tangguh!

---

## 2. Mini Project Evaluasi: "Manajemen Varian Produk"

**Skenario:**
Toko E-Commerce kita semakin besar. Satu produk (misal: "Kaos Polos") ternyata punya banyak varian (Merah/S, Merah/M, Biru/L). Stok tidak lagi menempel di `Product`, tapi di `ProductVariant`.

**Tugas:** Kembangkan project `e-commerce-api` yang sudah ada (lanjutan Pekan 1 & 2).

### Entitas Baru (Schema Prisma)
1.  **ProductVariant**
    - `id`, `productId` (Relasi ke Product).
    - `name` (Misal: "Merah - XL").
    - `sku` (Kode unik, misal: "KAOS-MER-XL").
    - `stock` (Jumlah stok spesifik varian ini).
    - `priceAdjustment` (Tambahan harga, misal XL lebih mahal 5000).

### Fitur Wajib (API Endpoints)
1.  **CRUD ProductVariant:**
    - `POST /api/products/:id/variants` (Tambah varian ke produk tertentu).
    - `GET /api/products/:id` (Harus menampilkan produk BESERTA daftar variannya).
2.  **Update Stok:**
    - `PATCH /api/variants/:id/stock` (Update stok varian tertentu).
3.  **Validasi:**
    - SKU harus unik.
    - Stok tidak boleh minus.

### Kriteria Penilaian
- **Relasi:** One-to-Many (`Product` punya banyak `ProductVariant`).
- **Include:** Endpoint GET Product menggunakan `include` untuk menarik data varian.
- **MVC:** Kode ditulis rapi di Controller dan Service (sesuai materi Pekan 1 Hari 5).

### Bonus Challenge (Tantangan Tambahan)
Jika kamu merasa tugas di atas terlalu mudah, coba fitur ini:
1. **Filter Harga:** Tambahkan query params `minPrice` dan `maxPrice` di endpoint `GET /products`.
   - Contoh: `/api/products?minPrice=50000&maxPrice=100000`
2. **Soft Delete Variant:** Jika Product dihapus (Soft Delete), semua Variant-nya juga harus ikut terhapus (Soft Delete).
   - *Clue: Gunakan Transaction (`prisma.$transaction`) atau Middleware Prisma.*

---

## 3. Self-Assessment

Jawab jujur pertanyaan ini untuk dirimu sendiri:
1.  Apakah saya paham bedanya Primary Key dan Foreign Key?
2.  Apakah saya bisa menjelaskan kenapa kita butuh ORM seperti Prisma?
3.  Apakah saya mengerti alur data dari Request -> Validasi -> Prisma -> Database -> Response?
4.  Bagian mana yang masih sering saya copy-paste tanpa paham maksudnya?

---

**Istirahat yang cukup!** Pekan depan kita akan masuk ke materi yang lebih seru: **Autentikasi (Login/Register)** dan **Upload File**. Siapkan energimu! â˜•ðŸ”¥

---

## 4. Kuis Review Teori (Pekan 2)

1. **Manakah urutan yang benar dalam membuat fitur baru dengan Prisma?**
   a. Coding Controller -> Update Schema -> Migrate
   b. Update Schema -> Migrate -> Coding Controller
   c. Migrate -> Update Schema -> Coding Controller
   d. Coding Controller -> Migrate -> Update Schema

2. **Apa perbedaan `One-to-Many` dan `Many-to-Many`?**
   a. One-to-Many butuh tabel pivot, Many-to-Many tidak
   b. One-to-Many pakai Foreign Key di salah satu tabel, Many-to-Many butuh tabel pivot
   c. Sama saja
   d. Many-to-Many tidak bisa di SQL

3. **Kenapa kita menggunakan `async/await` saat memanggil Prisma?**
   a. Karena operasi database butuh waktu (asynchronous)
   b. Agar kode jadi sinkron
   c. Karena Prisma lambat
   d. Agar tidak perlu callback

4. **Apa fungsi `prisma.product.findFirst()`?**
   a. Mengambil data produk pertama yang ditemukan sesuai kriteria
   b. Mengambil semua data produk
   c. Mengambil data produk berdasarkan ID unik
   d. Mengambil data produk terakhir

5. **Jika kita ingin validasi input "Email harus valid", kita pakai rule apa di express-validator?**
   a. `isText()`
   b. `isEmail()`
   c. `isString()`
   d. `isValid()`

6. **Status code 403 Forbidden artinya...**
   a. User belum login
   b. Halaman tidak ditemukan
   c. User sudah login tapi tidak punya hak akses
   d. Server error

7. **Apa keuntungan menggunakan Soft Delete?**
   a. Hemat storage
   b. Data bisa dikembalikan (restore) jika tidak sengaja terhapus
   c. Query jadi lebih cepat
   d. Tidak ada keuntungan

8. **Di Prisma schema, tanda tanya `?` (contoh: `String?`) artinya...**
   a. Kolom wajib diisi
   b. Kolom boleh kosong (NULL)
   c. Kolom primary key
   d. Kolom error

9. **Apa itu `npx prisma generate`?**
   a. Membuat database baru
   b. Mengenerate ulang Prisma Client (Type Definitions) setelah ada perubahan schema
   c. Menghapus database
   d. Menjalankan server

10. **Manakah yang BUKAN termasuk best practice error handling?**
    a. Menggunakan try-catch / async handler
    b. Mengembalikan status code yang sesuai
    c. Menampilkan pesan error "Database connection failed at line 23" ke user
    d. Membuat middleware error centralized
